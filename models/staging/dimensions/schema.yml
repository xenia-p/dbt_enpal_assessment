version: 2

models:
  - name: stg_dim_activity_types
    description: "Staging model for the `activity_types` source; normalised activity type rows."
    columns:
      - name: id
        description: "Primary id for the activity type from the source."
        tests: [not_null, unique]
      - name: name
        description: "Human-readable name of the activity type."
        tests: [not_null]
      - name: active
        description: "Flag indicating whether the activity type is active."
      - name: type
        description: "Category or type classification from the source."

  - name: stg_dim_dates
    description: "Date dimension generated by date range; provides useful date keys."
    columns:
      - name: start_date
        description: "Date value representing the day (primary key for this dimension)."
        tests: [not_null, unique]
      - name: next_date
        description: "The following date (start_date + 1 day)."
      - name: start_month
        description: "First day of the month for `start_date`."
      - name: next_month
        description: "First day of the next month for `start_date`."
      - name: next_year
        description: "Date one year after `start_date`."

  - name: stg_dim_lost_reasons
    description: "Dimension of lost reasons parsed from the `fields` source (field_key = 'lost_reason')."
    columns:
      - name: option_id
        description: "Identifier for the lost reason option (extracted from JSON)."
        tests: [not_null, unique]
      - name: option_label
        description: "Label / description for the lost reason option."
        tests: [not_null]

  - name: stg_dim_users
    description: "Staging model for users source; includes basic user attributes."
    columns:
      - name: id
        description: "User id from the source."
        tests: [not_null, unique]
      - name: name
        description: "Full name of the user."
      - name: email
        description: "Email address for the user."
      - name: modified
        description: "Last modified timestamp from the source."

  - name: stg_dim_stages
    description: "Staging model for stages source; maps stage ids to names."
    columns:
      - name: stage_id
        description: "Identifier for the stage from the source."
        tests: [not_null, unique]
      - name: stage_name
        description: "Human readable name for the stage."
        tests: [not_null]
